drop database if exists integrate_test;

create database if not exists integrate_test DEFAULT CHARSET=utf8;

create /*test partition hash, Test of refering to old values*/ table integrate_test.t_part (a int not null key);

create /*test partition list*/ table integrate_test.t_list(c1 int, c2 int) ENGINE=InnoDB DEFAULT CHARSET=utf8 partition by list(c1) (partition backend1 values in (1,3,7), partition backend2 values in (2,5,8));

create /*test partition single, Test of refering to old values*/ table integrate_test.t_single (a int not null key) single;

create /*test global, Test of refering to old values*/ table integrate_test.t_global (a int not null key) global;

analyze local tables integrate_test.t_global;
Table	Op	Msg_type	Msg_text
integrate_test.t_global	analyze	status	OK
integrate_test.t_global	analyze	status	OK

analyze no_write_to_binlog tables integrate_test.t_global, integrate_test.t_single;
Table	Op	Msg_type	Msg_text
integrate_test.t_global	analyze	status	OK
integrate_test.t_global	analyze	status	OK
integrate_test.t_single	analyze	status	OK

analyze table integrate_test.t_list;
Table	Op	Msg_type	Msg_text
integrate_test.t_list_0000	analyze	status	OK
integrate_test.t_list_0001	analyze	status	OK
integrate_test.t_list_0002	analyze	status	OK
integrate_test.t_list_0003	analyze	status	OK
integrate_test.t_list_0004	analyze	status	OK
integrate_test.t_list_0005	analyze	status	OK

analyze table integrate_test.t_part;
Table	Op	Msg_type	Msg_text
integrate_test.t_part_0000	analyze	status	OK
integrate_test.t_part_0001	analyze	status	OK
integrate_test.t_part_0002	analyze	status	OK
integrate_test.t_part_0003	analyze	status	OK
integrate_test.t_part_0004	analyze	status	OK
integrate_test.t_part_0005	analyze	status	OK
integrate_test.t_part_0006	analyze	status	OK
integrate_test.t_part_0007	analyze	status	OK
integrate_test.t_part_0008	analyze	status	OK
integrate_test.t_part_0009	analyze	status	OK
integrate_test.t_part_0010	analyze	status	OK
integrate_test.t_part_0011	analyze	status	OK
integrate_test.t_part_0012	analyze	status	OK
integrate_test.t_part_0013	analyze	status	OK
integrate_test.t_part_0014	analyze	status	OK
integrate_test.t_part_0015	analyze	status	OK
integrate_test.t_part_0016	analyze	status	OK
integrate_test.t_part_0017	analyze	status	OK
integrate_test.t_part_0018	analyze	status	OK
integrate_test.t_part_0019	analyze	status	OK
integrate_test.t_part_0020	analyze	status	OK
integrate_test.t_part_0021	analyze	status	OK
integrate_test.t_part_0022	analyze	status	OK
integrate_test.t_part_0023	analyze	status	OK
integrate_test.t_part_0024	analyze	status	OK
integrate_test.t_part_0025	analyze	status	OK
integrate_test.t_part_0026	analyze	status	OK
integrate_test.t_part_0027	analyze	status	OK
integrate_test.t_part_0028	analyze	status	OK
integrate_test.t_part_0029	analyze	status	OK
integrate_test.t_part_0030	analyze	status	OK
integrate_test.t_part_0031	analyze	status	OK
integrate_test.t_part_0032	analyze	status	OK
integrate_test.t_part_0033	analyze	status	OK
integrate_test.t_part_0034	analyze	status	OK
integrate_test.t_part_0035	analyze	status	OK
integrate_test.t_part_0036	analyze	status	OK
integrate_test.t_part_0037	analyze	status	OK
integrate_test.t_part_0038	analyze	status	OK
integrate_test.t_part_0039	analyze	status	OK
integrate_test.t_part_0040	analyze	status	OK
integrate_test.t_part_0041	analyze	status	OK
integrate_test.t_part_0042	analyze	status	OK
integrate_test.t_part_0043	analyze	status	OK
integrate_test.t_part_0044	analyze	status	OK
integrate_test.t_part_0045	analyze	status	OK
integrate_test.t_part_0046	analyze	status	OK
integrate_test.t_part_0047	analyze	status	OK
integrate_test.t_part_0048	analyze	status	OK
integrate_test.t_part_0049	analyze	status	OK
integrate_test.t_part_0050	analyze	status	OK
integrate_test.t_part_0051	analyze	status	OK
integrate_test.t_part_0052	analyze	status	OK
integrate_test.t_part_0053	analyze	status	OK
integrate_test.t_part_0054	analyze	status	OK
integrate_test.t_part_0055	analyze	status	OK
integrate_test.t_part_0056	analyze	status	OK
integrate_test.t_part_0057	analyze	status	OK
integrate_test.t_part_0058	analyze	status	OK
integrate_test.t_part_0059	analyze	status	OK
integrate_test.t_part_0060	analyze	status	OK
integrate_test.t_part_0061	analyze	status	OK
integrate_test.t_part_0062	analyze	status	OK
integrate_test.t_part_0063	analyze	status	OK

analyze /*test error: No Database Selected*/ table t_part;
ERROR 1046 (3D000): No database selected

analyze /*test error: No such table*/ table integrate_test.t_xxx, integrate_test.t_single;
ERROR 1146 (42S02): Table 't_xxx' doesn't exist

drop database integrate_test;
